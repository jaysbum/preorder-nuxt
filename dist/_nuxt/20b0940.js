(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{618:function(t,e,n){var content=n(632);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("48934eb0",content,!0,{sourceMap:!1})},628:function(t,e,n){"use strict";var o=n(6),r=n(629);o({target:"String",proto:!0,forced:n(630)("link")},{link:function(t){return r(this,"a","href",t)}})},629:function(t,e,n){var o=n(26),r=/"/g;t.exports=function(t,e,n,c){var l=String(o(t)),d="<"+e;return""!==n&&(d+=" "+n+'="'+String(c).replace(r,"&quot;")+'"'),d+">"+l+"</"+e+">"}},630:function(t,e,n){var o=n(10);t.exports=function(t){return o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},631:function(t,e,n){"use strict";n(618)},632:function(t,e,n){(e=n(52)(!1)).push([t.i,".app[data-v-35911cc6]{margin-top:30px;margin-bottom:30px}.option-image[data-v-35911cc6]{height:50px}input[type=number][data-v-35911cc6]{text-align:center}input[type=radio][data-v-35911cc6]{display:none;margin:10px;padding:10px}input[type=radio]+label[data-v-35911cc6]{display:inline-block;margin:5px;padding:4px 12px;background-color:#e7e7e7;border-color:#ddd}input[type=radio]:checked+label[data-v-35911cc6]{background-image:none;background-color:#e62d05;color:#fff;font-weight:700}.disabledbutton[data-v-35911cc6]{pointer-events:none;opacity:.4}.priceShow[data-v-35911cc6]{color:#ff4500;font-weight:700}.priceLabel[data-v-35911cc6]{font-size:small;margin-right:10px;color:#999}.div-border[data-v-35911cc6]{border-top:1px dotted #ccc}.input-quantity[data-v-35911cc6]{height:30px;padding:0 10px}.input-group-addon[data-v-35911cc6]{padding:0}",""]),t.exports=e},646:function(t,e,n){"use strict";n.r(e);n(30),n(100),n(31),n(24),n(180),n(65),n(66),n(42),n(20),n(44),n(628),n(25);var o=n(27),r=n(49),c=n.n(r),l=n(32);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)({exchangeRate:"sessionStorage/exchangeRate",markupRate:"sessionStorage/markupRate"})),data:function(){return{mainImage:null,rate:null,priceShow:null,priceOld:null,optionValue:[],quantity:[],singleQuantity:0,selectOptionData:[],selectOptions:[],selectItems:[],selectPrice:[],selectQuantity:[],selectTotal:[]}},asyncData:function(t){t.$axios;var e=t.route,n=t.params,o=t.$config.baseApiPath+"/item/"+e.params.provider+"/"+e.params.id;return c.a.get("".concat(o)).then((function(t){return{item:t.data,mainImage:t.data.mainImage,skuMap:t.data.skuMap,provider:n.provider,disabledCart:t.data.sku.length>0,disabledClass:t.data.sku.length>0?"row disabledbutton":"row"}}))},mounted:function(){this.initQty()},methods:{initQty:function(){var t=this;this.item.sku[this.item.sku.length-1].value.forEach((function(e,n){t.quantity.push(0)}))},setMainImage:function(t){this.mainImage=t.target.src},sortArray:function(t){return this.$_.sortBy(t,"price")},optionId:function(t,e){return"option-"+t+"-"+e},changeInput:function(t,e){"plus"==t?this.quantity[e]++:"minus"==t&&this.quantity[e]>0&&this.quantity[e]--;var n=this;this.item.sku[this.item.sku.length-1].value.forEach((function(t,i){n.quantity.push()})),this.item.sku.length>1||(this.quantity[0]>0?this.disabledCart=!1:this.disabledCart=!0),this.mapSku()},checkSku:function(t,e,n){e.isImage&&(this.mainImage=e.image);var option={group:n,label:e.label,image:e.image,isImage:e.isImage};this.selectOptionData[t]=e.data,this.selectOptions[t]=option;for(var o=!0,i=0;i<this.selectOptionData.length-1;i++)this.selectOptionData[i]||(o=!1);this.disabledClass=o?"row":"row disabledbutton",this.mapSku()},mapSku:function(){var t=this,e=this;if(this.selectQuantity=[],this.selectItems=[],this.selectPrice=[],this.optionValue=[],this.item.sku.length>1){var n=this.item.sku[this.item.sku.length-1].group;this.item.sku[this.item.sku.length-1].value.forEach((function(t,o){e.selectOptionData[e.item.sku.length-1]=t.data;var map=e.selectOptionData.join(";"),r="",c="",l="";e.item.skuMap.forEach((function(d,i){if(map==d.skuMap){var element=[];if(r=d.price*e.markupRate,c=d.promoPrice*e.markupRate,l=d.stock,e.quantity[o]>0){var option=[];option.push({group:n,label:t.label,image:t.image,isImage:t.isImage}),element=e.selectOptions.concat(option),e.selectItems.push(element),e.selectPrice.push(c),e.selectQuantity.push(e.quantity[o])}}})),e.optionValue.push({price:r,promoPrice:c,stock:l})})),this.disabledCart=!this.selectItems.length}else console.log(this.quantity[0]),this.item.skuMap.forEach((function(n,i){e.selectOptionData==n.skuMap&&(e.selectPrice.push(n.promoPrice*e.markupRate),e.selectQuantity.push(t.quantity[0]))}))},radioGroup:function(t){return"radio-"+t},selectedQuantity:function(){console.log(this.selectQuantity);var t=0;return this.selectQuantity.forEach((function(e,i){t+=e})),t},selectedTotal:function(){var t=this,e=0;return this.selectQuantity.forEach((function(n,i){e+=n*t.selectPrice[i]})),e*this.markupRate},addCart:function(){var t=this,e=(this.$store.state.sessionStorage.items,[]),n=this.item.sku.length,o=this;n<=1?o.existCart(this.selectOptions[0])||e.push({_id:(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),data:this.item,id:this.item.id,title:this.item.title,image:this.mainImage,options:1==n?this.selectOptions[0]:[],price:1==n?this.selectPrice[0]*o.markupRate:this.item.promoPrice[0].price*o.markupRate,quantity:this.quantity[0],shop:this.item.vendor,link:this.item.link,provider:o.$route.params.provider,mode:o.$store.state.sessionStorage.mode}):this.selectItems.forEach((function(n,i){o.existCart(n)||e.push({_id:(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),data:t.item,id:t.item.id,title:t.item.title,image:t.mainImage,options:n,price:t.selectPrice[i]*o.markupRate,quantity:t.selectQuantity[i],shop:t.item.vendor,link:t.item.link,provider:o.$route.params.provider,mode:o.$store.state.sessionStorage.mode})})),e.length?(this.$swal({title:"เพิ่มสินค้าลงในตะกร้าของท่านเรียบร้อยแล้ว",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,icon:"success"}),this.$store.commit("sessionStorage/SET_CART",e)):this.$swal({title:"ไม่สามารถบันทึกสินค้าได้เนื่องจากมีการเพิ่มสินค้าลงในตะกร้าสินค้าแล้ว\nกรุณาตรวจสอบตะกร้าสินค้าของท่านและปรับจำนวนที่ต้องการ",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,icon:"error"})},clearCart:function(){this.$store.commit("sessionStorage/CLEAR_CART")},existCart:function(t){var e=!1;return this.$store.state.sessionStorage.items.forEach((function(n,i){JSON.stringify(n.options)==JSON.stringify(t)&&(e=!0)})),e}}},h=(n(631),n(17)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item?n("div",{staticClass:"container app"},[n("h5",[t._v(t._s(t.item.title))]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},[n("img",{staticClass:"img-responsive",staticStyle:{width:"100%"},attrs:{src:t.mainImage}}),t._v(" "),t._l(t.item.listImage,(function(e){return n("span",{staticStyle:{padding:"5px"}},[n("img",{staticClass:"img-thumbnail",staticStyle:{height:"50px"},attrs:{src:e},on:{mouseover:t.setMainImage}})])}))],2),t._v(" "),n("div",{staticClass:"col-lg-8 col-md-8 col-sm-12 col-xs-12"},[n("h4",[n("span",{staticClass:"priceLabel"},[t._v("ราคา(หยวน)")]),t._l(t.sortArray(t.item.price),(function(e,o){return 0==o||o==t.item.price.length-1?n("span",{key:o,staticClass:"priceShow"},[t._v(t._s(t._f("price")(e.price*t.markupRate,"yuan"))+" "),o!=t.item.price.length-1?n("span",[t._v(" - ")]):t._e()]):t._e()}))],2),t._v(" "),n("h4",[n("span",{staticClass:"priceLabel"},[t._v("ราคา(บาท)")]),t._l(t.sortArray(t.item.price),(function(e,o){return 0==o||o==t.item.price.length-1?n("span",{key:o,staticClass:"priceShow"},[t._v(t._s(t._f("price")(e.price*t.markupRate,"baht",t.exchangeRate))+" "),o!=t.item.price.length-1?n("span",[t._v(" - ")]):t._e()]):t._e()}))],2),t._v(" "),n("a",{staticStyle:{"font-size":"small"},attrs:{href:t.item.link,target:"_blank"}},[n("i",{staticClass:"fas fa-link"}),t._v(" "+t._s(t.item.link))]),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{"font-size":"small"}},[t._v("ร้านค้า : "),n("strong",[t._v(t._s(t.item.vendor))])]),t._v(" "),t._l(t.item.sku,(function(option,e){return n("div",{staticClass:"row div-border",staticStyle:{padding:"20px 0px 20px 0px",margin:"10px"}},[n("div",{staticClass:"col-lg-2 col-md-2 col-sm-12 col-xs-12"},[n("strong",[t._v(t._s(option.group)+" : ")])]),t._v(" "),n("div",{staticClass:"col-lg-10 col-md-10 col-sm-12 col-xs-12"},t._l(option.value,(function(o,r){return n("span",{key:r,staticClass:"option-label"},[e!=t.item.sku.length-1||0==e?n("span",[n("input",{staticClass:"option-input",attrs:{type:"radio",id:t.optionId(e,r),name:t.radioGroup(e),"data-group":option.group,"data-group-original":option.groupOriginal,"data-image":o.image,"data-value":o.label,"data-value-original":o.labelOriginal},on:{change:function(n){return t.checkSku(e,o,option.group)}}}),t._v(" "),n("label",{attrs:{for:t.optionId(e,r)}},[o.isImage?n("img",{staticClass:"option-image",attrs:{src:o.image}}):t._e(),t._v(" "+t._s(o.label)+"\n              ")])]):n("div",{class:t.disabledClass,staticStyle:{"border-bottom":"1px dotted #ccc",padding:"10px"}},[n("div",{staticClass:"col-sm-4"},[o.isImage?n("img",{staticClass:"option-image",attrs:{src:o.image}}):t._e(),n("strong",[t._v(t._s(o.label))])]),t._v(" "),n("div",{staticClass:"col-sm-2"},[t.optionValue[r]&&t.optionValue[r].price?n("span",{staticStyle:{"font-size":"smaller"}},[t._v("\n                  "+t._s(t._f("price")(t.optionValue[r].price*t.markupRate,"yuan"))+"\n                  "),n("br"),t._v("\n                  "+t._s(t._f("price")(t.optionValue[r].price*t.markupRate,"baht",t.exchangeRate))+"\n                ")]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-3"},[t.optionValue[r]&&t.optionValue[r].price?n("span",{staticStyle:{"font-size":"smaller"}},[t._v("\n                stock : "+t._s(t.optionValue[r].stock)+"\n                ")]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-3"},[n("div",{staticClass:"input-group"},[n("span",{staticClass:"input-group-addon"},[n("button",{staticClass:"btn btn-outline-secondary input-quantity",attrs:{type:"button",disabled:t.optionValue[r]&&!t.optionValue[r].price},on:{click:function(e){return t.changeInput("minus",r)}}},[t._v("-")])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity[r],expression:"quantity[idx]"}],staticClass:"form-control input-quantity",staticStyle:{padding:"0px","font-size":"x-small"},attrs:{type:"number",disabled:t.optionValue[r]&&!t.optionValue[r].price},domProps:{value:t.quantity[r]},on:{input:function(e){e.target.composing||t.$set(t.quantity,r,e.target.value)}}}),t._v(" "),n("span",{staticClass:"input-group-addon"},[n("button",{staticClass:"btn btn-outline-secondary input-quantity",attrs:{type:"button",disabled:t.optionValue[r]&&!t.optionValue[r].price},on:{click:function(e){return t.changeInput("plus",r)}}},[t._v("+")])])])])])])})),0)])})),t._v(" "),t.item.sku.length<=1?n("div",{class:t.disabledClass,staticStyle:{padding:"20px 0px 20px 0px",margin:"10px"}},[t._m(0),t._v(" "),n("div",{staticClass:"col-lg-6 col-md-6 col-sm-12 col-xs-12"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-addon"},[n("button",{staticClass:"btn btn-outline-secondary input-quantity",attrs:{type:"button"},on:{click:function(e){return t.changeInput("minus",0)}}},[t._v("-")])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity[0],expression:"quantity[0]"}],staticClass:"form-control input-quantity",staticStyle:{padding:"0px","font-size":"x-small"},attrs:{type:"number"},domProps:{value:t.quantity[0]},on:{input:function(e){e.target.composing||t.$set(t.quantity,0,e.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-addon"},[n("button",{staticClass:"btn btn-outline-secondary input-quantity",attrs:{type:"button"},on:{click:function(e){return t.changeInput("plus",0)}}},[t._v("+")])])])])]):t._e(),t._v(" "),t.selectPrice.length?n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 col-md-12",staticStyle:{"background-color":"orangered",padding:"10px 30px"}},[n("span",{staticStyle:{color:"#fff"}},[n("strong",[t._v("จำนวนสินค้าที่เลือก "+t._s(t.selectedQuantity())+" ชิ้น ยอดรวม "+t._s(t._f("price")(t.selectedTotal(),"yuan"))+" "+t._s(t._f("price")(t.selectedTotal(),"baht",t.exchangeRate)))])])])]):t._e(),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 col-md-12",staticStyle:{padding:"10px 0px"}},[n("button",{staticStyle:{"background-color":"orange",border:"none",padding:"10px 30px 10px 30px",color:"#fff"},attrs:{disabled:t.disabledCart},on:{click:t.addCart}},[n("i",{staticClass:"fas fa-shopping-cart"}),t._v(" เพิ่มสินค้าลงในตะกร้า")]),t._v(" "),n("button",{attrs:{type:"button",name:"button"},on:{click:t.clearCart}},[t._v("clear")])])])],2)])]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-2 col-md-2 col-sm-12 col-xs-12"},[e("strong",[this._v("จำนวน")])])}],!1,null,"35911cc6",null);e.default=component.exports}}]);